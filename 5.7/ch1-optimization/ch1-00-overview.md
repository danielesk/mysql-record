# 概述

在数据库级别影响数据库性能的几个因素，如表，查询和配置信息设置。

## 数据库层面优化

使数据库应用程序快速运行的最重要因素是它的基础设计：

- 表的结构是否正确?特别是，列是否具有正确的数据类型，每个表是否具有适合工作类型的列?例如，执行频繁更新的应用程序常常有很多表只有很少的列，而分析大量数据的应用程序通常只有很少的表有很多列。
- 是否有适当的索引使查询有效?
- 您是否为每个表使用了适当的存储引擎，并利用了所使用的每个存储引擎的优点和特性?特别是，选择事务性存储引擎(如`InnoDB`)或非事务性存储引擎(如`MyISAM`)对性能和可伸缩性非常重要。
`注意：InnoDB是新表的默认存储引擎。在实践中，先进的InnoDB性能特性意味着InnoDB表通常比简单的MyISAM表表现得更好，特别是对于繁忙的数据库。`
- 每个表都使用了适当的行格式吗?这种选择还取决于表使用的存储引擎。特别是，压缩表使用更少的磁盘空间，因此读写数据所需的磁盘I/O更少。压缩适用于所有使用`InnoDB`表的工作负载，也适用于只读`MyISAM`表。
- 应用程序是否使用适当的锁定策略?例如，在可能的情况下允许共享访问，以便数据库操作可以并发运行;在适当的情况下请求独占访问，以便关键操作获得优先级。同样，存储引擎的选择也很重要。`InnoDB`存储引擎可以在不需要您参与的情况下处理大多数锁定问题，从而提高数据库的并发性，减少代码的实验和调优量。
- 所有用于缓存大小的内存区域都正确吗?也就是说，大到足以容纳频繁访问的数据，但又不会大到使物理内存过载并导致分页。要配置的主要内存区域是`InnoDB`缓冲池、`MyISAM`键缓存和MySQL查询缓存。
- 所有用于缓存大小的内存区域都正确吗?也就是说，大到足以容纳频繁访问的数据，但又不会大到使物理内存过载并导致分页。要配置的主要内存区域是InnoDB缓冲池、MyISAM键缓存和MySQL查询缓存。

## 硬件层级优化

随着数据库变得越来越繁忙，任何数据库应用程序最终都会遇到硬件限制。DBA必须评估是否可以调优应用程序或重新配置服务器以避免这些瓶颈，或者是否需要更多的硬件资源。系统瓶颈通常来自于以下几个方面:

- 磁盘寻道。磁盘需要时间才能找到一段数据。对于现代磁盘，这一过程的平均时间通常低于10ms，所以理论上我们可以每秒进行100次搜索。这段时间随着新磁盘的使用而缓慢改善，并且很难对单个表进行优化。优化寻道时间的方法是将数据分布到多个磁盘上。
- 磁盘读写。当磁盘处于正确的位置时，我们需要读取或写入数据。真对于现代磁盘，一个磁盘至少可以提供10-20MB/s的吞吐量。这比查找更容易优化，因为您可以从多个磁盘并行读取。
- CPU周期。当数据在主存时，我们必须处理它以得到我们的结果。与内存量相比，拥有较大的表是最常见的限制因素。但是对于小表，速度通常不是问题。
- 内存带宽。当CPU需要超过CPU缓存容量的数据时，主内存带宽就会成为瓶颈。对于大多数系统来说，这是一个不常见的瓶颈，但是需要注意。

## 性能与可扩展性的平衡性

- ...










